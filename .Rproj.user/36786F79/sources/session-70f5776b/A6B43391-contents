
plot_diag <- plot_model(final_model,
           type = "diag")

plot_diag
library(performance)
check_model(m_uncorr)  


m_uncorr <- glmer(
  choice ~ target*group*block + reward*effort + school +
    (1 + block || ppn),
  data = df_long, family = binomial, control = ctrl
)

anova(m_uncorr, final_model)


plot_model(final_model, 
           type = "diag")


m3 <- glmer(
  choice ~ target*group*block + reward*effort + school +
    (1 | ppn),
  data = df_long, family = binomial, control = ctrl
)

anova(m_uncorr, m3)


library(lattice)

re <- ranef(m_uncorr, condVar = TRUE)
qqmath(re, conf.level = 0.95)  # one panel per RE term, with CIs

plot_model(m_uncorr,
           type = "diag")



plot_model(final_model, 
           type = "diag")



plot_model(final_mod_model,
           type = "diag")


citation("car")



library(Hmisc) 

# predicted probabilities
probs <- fitted(final_model, type = "response")


tab_model(final_model)


emmip(final_model, effort ~ reward, CIs = TRUE, type = "response")
