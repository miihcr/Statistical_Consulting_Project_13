"0",""
"0","# Baseline model (no moderators)"
"0","m_baseline <- glmmTMB("
"0","  choice ~ target*group*block + reward*effort + school +"
"0","    (1 + block | ppn),"
"0","  data = df_long, family = binomial"
"0",")"
"0",""
"0","# Add susceptibility (main effect only)"
"0","m_susceptibility <- glmmTMB("
"0","  choice ~ target*group*block + reward*effort + school +"
"0","    susceptibility_c + "
"0","    (1 + block | ppn),"
"0","  data = df_long, family = binomial"
"0",")"
"0",""
"0","# Add cohesion (main effect only)"
"0","m_cohesion <- glmmTMB("
"0","  choice ~ target*group*block + reward*effort + school +"
"0","    susceptibility_c + cohesion_c + "
"0","    (1 + block | ppn),"
"0","  data = df_long, family = binomial"
"0",")"
"0",""
"0","# Moderator 1: susceptibility × group"
"0","m_suscept_mod <- glmmTMB("
"0","  choice ~ target*group*block + reward*effort + school +"
"0","    susceptibility_c*group + cohesion_c +"
"0","    (1 + block | ppn),"
"0","  data = df_long, family = binomial"
"0",")"
"0",""
"0","# Moderator 2: cohesion × group"
"0","m_cohesion_mod <- glmmTMB("
"0","  choice ~ target*group*block + reward*effort + school +"
"0","    susceptibility_c*group + cohesion_c*group +"
"0","    (1 + block | ppn),"
"0","  data = df_long, family = binomial"
"0",")"
"0",""
"0","# Compare model fits"
"0","anova(m_baseline, m_susceptibility, m_cohesion, "
"0","      m_suscept_mod, m_cohesion_mod)"
"1","Data: df_long"
"1","
"
"1","Models:"
"1","
"
"1","m_baseline: choice ~ target * group * block + reward * effort + school + , zi=~0, disp=~1"
"1","
"
"1","m_baseline:     (1 + block | ppn), zi=~0, disp=~1"
"1","
"
"1","m_susceptibility: choice ~ target * group * block + reward * effort + school + , zi=~0, disp=~1"
"1","
"
"1","m_susceptibility:     susceptibility_c + (1 + block | ppn), zi=~0, disp=~1"
"1","
"
"1","m_cohesion: choice ~ target * group * block + reward * effort + school + , zi=~0, disp=~1"
"1","
"
"1","m_cohesion:     susceptibility_c + cohesion_c + (1 + block | ppn), zi=~0, disp=~1"
"1","
"
"1","m_suscept_mod: choice ~ target * group * block + reward * effort + school + , zi=~0, disp=~1"
"1","
"
"1","m_suscept_mod:     susceptibility_c * group + cohesion_c + (1 + block | ppn), zi=~0, disp=~1"
"1","
"
"1","m_cohesion_mod: choice ~ target * group * block + reward * effort + school + , zi=~0, disp=~1"
"1","
"
"1","m_cohesion_mod:     susceptibility_c * group + cohesion_c * group + (1 + block | , zi=~0, disp=~1"
"1","
"
"1","m_cohesion_mod:     ppn), zi=~0, disp=~1"
"1","
"
"1","                "
"1"," Df"
"1","    AIC"
"1","    BIC"
"1","  logLik"
"1"," deviance"
"1","  Chisq"
"1"," Chi Df"
"1","
m_baseline      "
"1"," 28"
"1"," 2456.0"
"1"," 2643.0"
"1"," -1200.0"
"1","   2400.0"
"1","       "
"1","       "
"1","
m_susceptibility"
"1"," 29"
"1"," 2458.0"
"1"," 2651.7"
"1"," -1200.0"
"1","   2400.0"
"1"," 0.0196"
"1","      1"
"1","
m_cohesion      "
"1"," 30"
"1"," 2459.3"
"1"," 2659.7"
"1"," -1199.7"
"1","   2399.3"
"1"," 0.6450"
"1","      1"
"1","
m_suscept_mod   "
"1"," 32"
"1"," 2454.7"
"1"," 2668.4"
"1"," -1195.4"
"1","   2390.7"
"1"," 8.6126"
"1","      2"
"1","
m_cohesion_mod  "
"1"," 34"
"1"," 2458.3"
"1"," 2685.4"
"1"," -1195.2"
"1","   2390.3"
"1"," 0.4219"
"1","      2"
"1","
"
"1","                "
"1"," Pr(>Chisq)"
"1","  "
"1","
m_baseline      "
"1","           "
"1","  "
"1","
m_susceptibility"
"1","    0.88855"
"1","  "
"1","
m_cohesion      "
"1","    0.42189"
"1","  "
"1","
m_suscept_mod   "
"1","    0.01348"
"1"," *"
"1","
m_cohesion_mod  "
"1","    0.80983"
"1","  "
"1","
"
"1","---
Signif. codes:  "
"1",""
"1","0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1"
"1","
"
"0","# Keep the better-fitting moderator model"
"0","final_mod_model <- m_suscept_mod"
"0","summary(final_mod_model)"
"1"," Family:"
"1"," "
"1","binomial"
"1"," "
"1"," ( logit )"
"1","
"
"1","Formula:         "
"1"," "
"1","
"
"1","choice ~ target * group * block + reward * effort + school + "
"1"," "
"1","
"
"1","    susceptibility_c * group + cohesion_c + (1 + block | ppn)"
"1","
"
"1","Data:"
"1"," "
"1","df_long"
"1","
"
"1","
"
"1","      AIC "
"1","      BIC "
"1","   logLik "
"1","-2*log(L) "
"1"," df.resid "
"1","
"
"1","   2454.7 "
"1","   2668.4 "
"1","  -1195.4 "
"1","   2390.7 "
"1","     5844 "
"1","
"
"1","
"
"1","Random effects:
"
"1","
"
"1",""
"1","Conditional model"
"1",""
"1",":
"
"1",""
"1"," Groups"
"1"," Name       "
"1"," Variance"
"1"," Std.Dev."
"1"," Corr"
"1"," "
"1","
"
"1"," ppn   "
"1"," (Intercept)"
"1"," 1.44    "
"1"," 1.200   "
"1","     "
"1"," "
"1","
"
"1","       "
"1"," blockpost  "
"1"," 5.23    "
"1"," 2.287   "
"1"," 0.27"
"1"," "
"1","
"
"1","Number of obs: 5876, groups: "
"1"," "
"1","ppn, 164"
"1","
"
"1","
"
"1",""
"1","Conditional model"
"1",""
"1",":
"
"1","                                            "
"1"," Estimate"
"1"," Std. Error"
"1"," z value"
"1","
(Intercept)                                 "
"1","  2.88831"
"1","    0.41171"
"1","   7.015"
"1","
targetclimate                               "
"1"," -0.04200"
"1","    0.28980"
"1","  -0.145"
"1","
targetprosocial                             "
"1","  0.13176"
"1","    0.29656"
"1","   0.444"
"1","
grouppositive_norm                          "
"1","  0.47395"
"1","    0.40405"
"1","   1.173"
"1","
groupnegative_norm                          "
"1","  0.48672"
"1","    0.40869"
"1","   1.191"
"1","
blockpost                                   "
"1","  2.47475"
"1","    0.63734"
"1","   3.883"
"1","
reward6 coins                               "
"1","  0.83484"
"1","    0.23975"
"1","   3.482"
"1","
reward10 coins                              "
"1","  1.16321"
"1","    0.26057"
"1","   4.464"
"1","
effort90%                                   "
"1"," -1.83187"
"1","    0.17770"
"1"," -10.309"
"1","
school1_loc2                                "
"1"," -0.35713"
"1","    0.35597"
"1","  -1.003"
"1","
school2                                     "
"1","  0.55049"
"1","    0.35573"
"1","   1.548"
"1","
susceptibility_c                            "
"1"," -0.15954"
"1","    0.27214"
"1","  -0.586"
"1","
cohesion_c                                  "
"1"," -3.27231"
"1","    6.00056"
"1","  -0.545"
"1","
targetclimate:grouppositive_norm            "
"1"," -0.12169"
"1","    0.43967"
"1","  -0.277"
"1","
targetprosocial:grouppositive_norm          "
"1"," -0.90930"
"1","    0.42835"
"1","  -2.123"
"1","
targetclimate:groupnegative_norm            "
"1"," -0.01469"
"1","    0.44429"
"1","  -0.033"
"1","
targetprosocial:groupnegative_norm          "
"1"," -0.29635"
"1","    0.44489"
"1","  -0.666"
"1","
targetclimate:blockpost                     "
"1"," -0.25567"
"1","    0.47428"
"1","  -0.539"
"1","
targetprosocial:blockpost                   "
"1"," -0.30455"
"1","    0.48122"
"1","  -0.633"
"1","
grouppositive_norm:blockpost                "
"1","  0.72309"
"1","    0.82267"
"1","   0.879"
"1","
groupnegative_norm:blockpost                "
"1"," -0.73862"
"1","    0.74780"
"1","  -0.988"
"1","
reward6 coins:effort90%                     "
"1","  0.97639"
"1","    0.29598"
"1","   3.299"
"1","
reward10 coins:effort90%                    "
"1","  0.87133"
"1","    0.31802"
"1","   2.740"
"1","
grouppositive_norm:susceptibility_c         "
"1","  0.74295"
"1","    0.37818"
"1","   1.965"
"1","
groupnegative_norm:susceptibility_c         "
"1"," -0.28991"
"1","    0.36769"
"1","  -0.788"
"1","
targetclimate:grouppositive_norm:blockpost  "
"1"," -1.29150"
"1","    0.76986"
"1","  -1.678"
"1","
targetprosocial:grouppositive_norm:blockpost"
"1"," -0.48003"
"1","    0.76728"
"1","  -0.626"
"1","
targetclimate:groupnegative_norm:blockpost  "
"1","  0.56420"
"1","    0.71206"
"1","   0.792"
"1","
targetprosocial:groupnegative_norm:blockpost"
"1","  0.54959"
"1","    0.70888"
"1","   0.775"
"1","
"
"1","                                            "
"1"," Pr(>|z|)"
"1","    "
"1","
(Intercept)                                 "
"1"," 2.29e-12"
"1"," ***"
"1","
targetclimate                               "
"1"," 0.884770"
"1","    "
"1","
targetprosocial                             "
"1"," 0.656828"
"1","    "
"1","
grouppositive_norm                          "
"1"," 0.240798"
"1","    "
"1","
groupnegative_norm                          "
"1"," 0.233690"
"1","    "
"1","
blockpost                                   "
"1"," 0.000103"
"1"," ***"
"1","
reward6 coins                               "
"1"," 0.000497"
"1"," ***"
"1","
reward10 coins                              "
"1"," 8.04e-06"
"1"," ***"
"1","
effort90%                                   "
"1","  < 2e-16"
"1"," ***"
"1","
school1_loc2                                "
"1"," 0.315737"
"1","    "
"1","
school2                                     "
"1"," 0.121743"
"1","    "
"1","
susceptibility_c                            "
"1"," 0.557704"
"1","    "
"1","
cohesion_c                                  "
"1"," 0.585524"
"1","    "
"1","
targetclimate:grouppositive_norm            "
"1"," 0.781960"
"1","    "
"1","
targetprosocial:grouppositive_norm          "
"1"," 0.033770"
"1"," *  "
"1","
targetclimate:groupnegative_norm            "
"1"," 0.973625"
"1","    "
"1","
targetprosocial:groupnegative_norm          "
"1"," 0.505337"
"1","    "
"1","
targetclimate:blockpost                     "
"1"," 0.589838"
"1","    "
"1","
targetprosocial:blockpost                   "
"1"," 0.526808"
"1","    "
"1","
grouppositive_norm:blockpost                "
"1"," 0.379423"
"1","    "
"1","
groupnegative_norm:blockpost                "
"1"," 0.323288"
"1","    "
"1","
reward6 coins:effort90%                     "
"1"," 0.000971"
"1"," ***"
"1","
reward10 coins:effort90%                    "
"1"," 0.006146"
"1"," ** "
"1","
grouppositive_norm:susceptibility_c         "
"1"," 0.049465"
"1"," *  "
"1","
groupnegative_norm:susceptibility_c         "
"1"," 0.430418"
"1","    "
"1","
targetclimate:grouppositive_norm:blockpost  "
"1"," 0.093433"
"1"," .  "
"1","
targetprosocial:grouppositive_norm:blockpost"
"1"," 0.531563"
"1","    "
"1","
targetclimate:groupnegative_norm:blockpost  "
"1"," 0.428153"
"1","    "
"1","
targetprosocial:groupnegative_norm:blockpost"
"1"," 0.438169"
"1","    "
"1","
"
"1","---
Signif. codes:  "
"1",""
"1","0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1"
"1","
"
"0","car::Anova(final_mod_model, type = 3)"
"1","Analysis of Deviance Table (Type III Wald chisquare tests)
"
"1","
"
"1","Response: choice"
"1","
"
"1","                      "
"1","    Chisq"
"1"," Df"
"1"," Pr(>Chisq)"
"1","    "
"1","
(Intercept)           "
"1","  49.2163"
"1","  1"
"1","  2.292e-12"
"1"," ***"
"1","
target                "
"1","   0.3729"
"1","  2"
"1","  0.8298891"
"1","    "
"1","
group                 "
"1","   1.9347"
"1","  2"
"1","  0.3800962"
"1","    "
"1","
block                 "
"1","  15.0772"
"1","  1"
"1","  0.0001032"
"1"," ***"
"1","
reward                "
"1","  24.3132"
"1","  2"
"1","  5.253e-06"
"1"," ***"
"1","
effort                "
"1"," 106.2702"
"1","  1"
"1","  < 2.2e-16"
"1"," ***"
"1","
school                "
"1","  10.0697"
"1","  2"
"1","  0.0065072"
"1"," ** "
"1","
susceptibility_c      "
"1","   0.3437"
"1","  1"
"1","  0.5577037"
"1","    "
"1","
cohesion_c            "
"1","   0.2974"
"1","  1"
"1","  0.5855242"
"1","    "
"1","
target:group          "
"1","   5.6818"
"1","  4"
"1","  0.2242036"
"1","    "
"1","
target:block          "
"1","   0.4636"
"1","  2"
"1","  0.7930992"
"1","    "
"1","
group:block           "
"1","   3.1249"
"1","  2"
"1","  0.2096222"
"1","    "
"1","
reward:effort         "
"1","  13.9849"
"1","  2"
"1","  0.0009188"
"1"," ***"
"1","
group:susceptibility_c"
"1","   8.5967"
"1","  2"
"1","  0.0135910"
"1"," *  "
"1","
target:group:block    "
"1","   5.8275"
"1","  4"
"1","  0.2124073"
"1","    "
"1","
"
"1","---
Signif. codes:  "
"1",""
"1","0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1"
"1","
"
