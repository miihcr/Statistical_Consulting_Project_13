"0","# Expand to long format"
"0","edges = tidyr::unnest(data_sn, cols = c(nom_like))"
"0",""
"0","# Clean up whitespace and remove NA"
"0","edges$nom_like = str_trim(edges$nom_like)"
"0","edges = subset(edges, nom_like != """" & !is.na(nom_like))"
"0",""
"0","# Create node list (all participants)"
"0","nodes = data_sn[, c(""ppn"", ""school"", ""class"")]"
"0","colnames(nodes)[1] = ""name""   # igraph expects ""name"" for node IDs"
"0",""
"0","# Rename for clarity"
"0","colnames(edges)[colnames(edges) == ""nom_like""] = ""target"""
"0","colnames(edges)[colnames(edges) == ""ppn""] = ""source"""
