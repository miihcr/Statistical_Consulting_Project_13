"0","# Clean nominations column into numeric lists"
"0","data_sn$nominations_clean = lapply(data_sn$nom_like, function(x) {"
"0","  if (is.null(x) || all(is.na(x))) return(NA)"
"0","  as.numeric(unlist(str_extract_all(paste(x, collapse = "" ""), ""\\d+"")))"
"0","})"
"0",""
"0","# Count number of nominations per subject"
"0","data_sn$n_nominations = sapply(data_sn$nominations_clean, function(x) {"
"0","  if (all(is.na(x))) 0 else length(x)"
"0","})"
"0",""
"0",""
"0","# Create summary data frame"
"0","class_summary = data.frame("
"0","  class = classes,"
"0","  n_subjects = NA,"
"0","  total_nominations = NA,"
"0","  mean_nominations = NA"
"0",")"
"0",""
"0","# Loop through classes and compute descriptives"
"0","for (i in seq_along(classes)) {"
"0","  cls = classes[i]"
"0","  sub_df = data_sn[data_sn$class == cls, ]"
"0","  "
"0","  n_subjects = nrow(sub_df)"
"0","  total_nominations = sum(sub_df$n_nominations, na.rm = TRUE)"
"0","  mean_nominations = mean(sub_df$n_nominations, na.rm = TRUE)"
"0","  "
"0","  class_summary[i, ""n_subjects""] = n_subjects"
"0","  class_summary[i, ""total_nominations""] = total_nominations"
"0","  class_summary[i, ""mean_nominations""] = mean_nominations"
"0","}"
"0",""
"0","# View results"
"0","print(class_summary)"
